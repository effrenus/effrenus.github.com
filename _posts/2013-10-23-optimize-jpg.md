---
layout: post
title: Оптимизация графических файлов (JPEG) на основе PSNR
---
В одном из видео докладчик предложил идею, как автоматически сжимать jpeg файлы и оценивать результат. Для этого в качестве метрики можно использовать [PSNR](http://ru.wikipedia.org/wiki/%CF%E8%EA%EE%E2%EE%E5_%EE%F2%ED%EE%F8%E5%ED%E8%E5_%F1%E8%E3%ED%E0%EB%E0_%EA_%F8%F3%EC%F3) (Peak-Signal-to-Noise-Ratio).

В результате я написал небольшой скрипт. Начинаем сравнивать с самого низкого качества (например, 60) и продолжаем до максимума (95), для полученных
изображений получаем PSNR, который сравниваем с пороговым значением (я взял 39, после визуального просмотра).
Если вычисленное значение больше, а размер файла меньше оригинального - копируем файл в текущую директорию и переходим к следующему.

{% gist 7114591 %}